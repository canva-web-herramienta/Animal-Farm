<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Rebeli贸n en la granja</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: linear-gradient(#87CEEB, #c2f0c2);
  overflow-x: hidden;
  color: white;
  display: flex;
  flex-direction: column;
  align-items: center;
  min-height: 100vh;
  position: relative;
}

.farm-bg {
  position: fixed;
  inset: 0;
  z-index: -1;
  background: url('farm.jpg') repeat-x bottom/contain;
  animation: moveFarm 60s linear infinite;
  opacity: 0.9;
}

@keyframes moveFarm {
  de { posici贸n-fondo-x: 0; }
  a { posici贸n-fondo-x: -2000px; }
}

h1 {
  margen-superior: 20px;
  sombra-texto: 0 2px 6px rgba(0,0,0,0.6);
}

.balance {
  tama帽o-fuente: 24px;
  margen: 6px 0;
  sombra-texto: 0 2px 6px rgba(0,0,0,0.6);
}

.grid {
  display: grid;
  plantillas-cuadr铆cula-columnas: repeat(auto-ajuste, minmax(220px, 1fr));
  espacio: 16px;
  ancho: 90%;
  ancho-m谩ximo: 900px;
  margen-superior: 20px;
}

.card {
  fondo: rgba(0,0,0,0.55);
  radio-borde: 18px;
  relleno: 16px;
  alineaci贸n del texto: centro;
  filtro de fondo: desenfoque(6px);
  sombra del cuadro: 0 6px 25px rgba(0,0,0,0.5);
}

.card img {
  ancho: 90px;
  alto: 90px;
  ajuste al objeto: contener;
  margen inferior: 8px;
}

bot贸n {
  margen superior: 10px;
  relleno: 10px 16px;
  borde: ninguno;
  radio del borde: 12px;
  tama帽o de fuente: 14px;
  cursor: puntero;
  fondo: degradado lineal(135deg,#ffd166,#ffb703);
  peso de fuente: negrita;
}

.panel {
  margen superior: 20px;
  fondo: rgba(0,0,0,0.6);
  relleno: 14px 24px;
  radio del borde: 14px;
  tama帽o de fuente: 14px;
  alineaci贸n del texto: centro;
}

.ref-box {
  margin-top: 10px;
  word-break: break-all;
  font-size: 12px;
  background: rgba(255,255,255,0.1);
  padding: 6px;
  border-radius: 8px;
}
</style>
</head>

<body>

<div class="farm-bg"></div>

<h1> Rebeli贸n en la Granja </h1>

<div id="ton-connect"></div>

<div class="balance">
  Saldo: <span id="balance">0</span> TON
</div>

<div class="balance">
  Producci贸n/seg: <span id="perSec">0</span> TON
</div>

<div class="grid" id="shop"></div>

<div class="panel">
  <div>Total ganado: <span id="earned">0</span> TON</div>
  <div>Referidos:<span id="refs">0</span></div>
  <div class="ref-box" id="refLink"></div>

  <button onclick="withdraw()"> Retirar TON</button>
  <br/><br/>
  <button onclick="claimBonus()"> Bono diario</button>
</div>

<!-- Telegram + TonConnect -->
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

const tonConnectUI = new TON_CONNECT_UI.TonConnectUI({
  manifestUrl: "https://canva-web-herramienta.github.io/Animal-Farm/tonconnect-manifest.json",
  buttonRootId: "ton-connect"
});

const animals = [
  { nombre: "Gallo", precio: 3, producci贸n: 0.1, img: "https://images.emojiterra.com/google/noto-emoji/unicode-16.0/color/svg/1f413.svg" },
  { nombre: "Oveja", precio: 10, producci贸n: 0.4, img: "https://cdn-icons-png.flaticon.com/512/1998/1998610.png" },
  { nombre: "Perro", precio: 20, producci贸n: 1, img: "https://cdn-icons-png.flaticon.com/512/616/616430.png" },
  { nombre: "Gato", precio: 30, producci贸n: 1.5, img: "https://cdn-icons-png.flaticon.com/512/616/616408.png" }
];

let saldo = N煤mero(localStorage.getItem("saldo")) || 0;
let ganado = N煤mero(localStorage.getItem("ganado")) || 0;
let propio = JSON.parse(localStorage.getItem("propiedad")) || [0,0,0,0];
let referencias = N煤mero(localStorage.getItem("referencias")) || 0;

const referencia = ventana.Telegram?.WebApp?.initDataUnsafe?.start_param;
</script>

</body>
</html>
